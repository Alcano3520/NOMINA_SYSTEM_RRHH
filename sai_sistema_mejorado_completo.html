<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAI - Sistema Administrativo Integral | INSEVIG CIA. LTDA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .company-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .company-logo {
            width: 50px;
            height: 50px;
            background: #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1e3c72;
            font-size: 18px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 14px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1e3c72;
        }

        .main-container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .sidebar {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 20px;
            height: fit-content;
        }

        .sidebar h3 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 18px;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 10px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-menu li {
            margin-bottom: 8px;
        }

        .nav-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: #4a5568;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-menu a:hover, .nav-menu a.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateX(5px);
        }

        .nav-menu i {
            width: 20px;
            text-align: center;
        }

        .content-area {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 25px;
            min-height: 600px;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e5e9;
        }

        .content-title {
            color: #1e3c72;
            font-size: 24px;
            font-weight: 600;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 4px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .stat-card h4 {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 12px;
            opacity: 0.8;
        }

        .employee-search {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 12px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-control {
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
        }

        .employee-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 12px;
        }

        .employee-table th,
        .employee-table td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .employee-table th {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .employee-table tbody tr:hover {
            background: #f8fafc;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .status-vacation {
            background: #fff3cd;
            color: #856404;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .payroll-section {
            margin-top: 30px;
        }

        .payroll-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .payroll-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .payroll-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .payroll-card h4 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .feature-list {
            list-style: none;
        }

        .feature-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #4a5568;
        }

        .feature-list i {
            color: #48bb78;
            width: 16px;
        }

        .compliance-panel {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .compliance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .compliance-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .compliance-item h5 {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .compliance-value {
            font-size: 18px;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .sidebar {
                order: 2;
            }

            .content-area {
                order: 1;
            }

            .search-form {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="company-info">
                <div class="company-logo">SAI</div>
                <div>
                    <h1 style="font-size: 20px; margin-bottom: 2px;">Sistema Administrativo Integral</h1>
                    <p style="font-size: 14px; opacity: 0.9;">INSEVIG CIA. LTDA - Recursos Humanos y Nómina</p>
                </div>
            </div>
            <div class="user-info">
                <div>
                    <div style="font-weight: 600;">Henry Pozo</div>
                    <div style="opacity: 0.8;">Administrador RRHH</div>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <div class="dashboard-grid">
            <nav class="sidebar">
                <h3><i class="fas fa-users"></i> Módulos RRHH</h3>
                <ul class="nav-menu">
                    <li><a href="#" class="active" onclick="showSection('empleados')"><i class="fas fa-users"></i> Empleados</a></li>
                    <li><a href="#" onclick="showSection('nomina')"><i class="fas fa-money-bill-wave"></i> Nómina</a></li>
                    <li><a href="#" onclick="showSection('decimos')"><i class="fas fa-gift"></i> Décimos</a></li>
                    <li><a href="#" onclick="showSection('vacaciones')"><i class="fas fa-plane"></i> Vacaciones</a></li>
                    <li><a href="#" onclick="showSection('liquidaciones')"><i class="fas fa-calculator"></i> Liquidaciones</a></li>
                    <li><a href="#" onclick="showSection('prestamos')"><i class="fas fa-hand-holding-usd"></i> Préstamos</a></li>
                    <li><a href="#" onclick="showSection('egresos')"><i class="fas fa-money-bill-wave"></i> Egresos</a></li>
                    <li><a href="#" onclick="showSection('dotacion')"><i class="fas fa-boxes"></i> Dotación</a></li>
                    <li><a href="#" onclick="showSection('reportes')"><i class="fas fa-chart-bar"></i> Reportes</a></li>
                    <li><a href="#" onclick="showSection('configuracion')"><i class="fas fa-cog"></i> Configuración</a></li>
                </ul>

                <h3 style="margin-top: 30px;"><i class="fas fa-shield-alt"></i> Seguridad</h3>
                <ul class="nav-menu">
                    <li><a href="#" onclick="showSection('departamentos')"><i class="fas fa-building"></i> Departamentos</a></li>
                    <li><a href="#" onclick="showSection('turnos')"><i class="fas fa-clock"></i> Turnos</a></li>
                    <li><a href="#" onclick="showSection('equipos')"><i class="fas fa-hard-hat"></i> Equipos</a></li>
                    <li><a href="#" onclick="showSection('clientes')"><i class="fas fa-handshake"></i> Clientes</a></li>
                </ul>

                <h3 style="margin-top: 30px;"><i class="fas fa-database"></i> Base de Datos</h3>
                <ul class="nav-menu">
                    <li><a href="#" onclick="showSection('rpemplea')"><i class="fas fa-table"></i> RPEMPLEA</a></li>
                    <li><a href="#" onclick="showSection('rphistor')"><i class="fas fa-history"></i> RPHISTOR</a></li>
                    <li><a href="#" onclick="showSection('rpcontrl')"><i class="fas fa-sliders-h"></i> RPCONTRL</a></li>
                </ul>
            </nav>

            <main class="content-area">
                <div id="empleados-section">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Empleados - Tabla RPEMPLEA</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="newEmployee()">
                                <i class="fas fa-plus"></i> Nuevo Empleado
                            </button>
                            <button class="btn btn-success" onclick="processMassiveOperation('import')">
                                <i class="fas fa-upload"></i> Carga Masiva
                            </button>
                            <button class="btn btn-warning" onclick="processMassiveOperation('corrections')">
                                <i class="fas fa-edit"></i> Correcciones Masivas
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Total Empleados Activos</h4>
                            <div class="stat-value">847</div>
                            <div class="stat-change">+12 este mes</div>
                        </div>
                        <div class="stat-card">
                            <h4>Guardias de Seguridad</h4>
                            <div class="stat-value">623</div>
                            <div class="stat-change">73.6% del total</div>
                        </div>
                        <div class="stat-card">
                            <h4>Personal Administrativo</h4>
                            <div class="stat-value">224</div>
                            <div class="stat-change">26.4% del total</div>
                        </div>
                        <div class="stat-card">
                            <h4>En Vacaciones</h4>
                            <div class="stat-value">34</div>
                            <div class="stat-change">4.0% del total</div>
                        </div>
                    </div>

                    <div class="compliance-panel">
                        <h3><i class="fas fa-shield-alt"></i> Cumplimiento Ecuador - Sector Seguridad</h3>
                        <div class="compliance-grid">
                            <div class="compliance-item">
                                <h5>Aportaciones IESS</h5>
                                <div class="compliance-value">100%</div>
                            </div>
                            <div class="compliance-item">
                                <h5>Décimo Tercer Sueldo</h5>
                                <div class="compliance-value">Al día</div>
                            </div>
                            <div class="compliance-item">
                                <h5>Décimo Cuarto Sueldo</h5>
                                <div class="compliance-value">Al día</div>
                            </div>
                            <div class="compliance-item">
                                <h5>Fondos de Reserva</h5>
                                <div class="compliance-value">Calculado</div>
                            </div>
                            <div class="compliance-item">
                                <h5>Vacaciones Pagadas</h5>
                                <div class="compliance-value">95.2%</div>
                            </div>
                            <div class="compliance-item">
                                <h5>Horas Extras Reguladas</h5>
                                <div class="compliance-value">Controlado</div>
                            </div>
                        </div>
                    </div>

                    <div class="employee-search">
                        <h4 style="margin-bottom: 15px; color: #1e3c72;">Búsqueda Avanzada - Campos RPEMPLEA</h4>
                        <form class="search-form">
                            <div class="form-group">
                                <label>EMPLEADO (Código)</label>
                                <input type="text" class="form-control" id="search-empleado" placeholder="001001">
                            </div>
                            <div class="form-group">
                                <label>CEDULA</label>
                                <input type="text" class="form-control" id="search-cedula" placeholder="1234567890">
                            </div>
                            <div class="form-group">
                                <label>NOMBRES</label>
                                <input type="text" class="form-control" id="search-nombres" placeholder="MARÍA ELENA">
                            </div>
                            <div class="form-group">
                                <label>APELLIDOS</label>
                                <input type="text" class="form-control" id="search-apellidos" placeholder="GONZÁLEZ">
                            </div>
                            <div class="form-group">
                                <label>DEPTO (Departamento)</label>
                                <select class="form-control" id="search-depto">
                                    <option value="">Todos</option>
                                    <option value="001">001 - Seguridad Empresarial</option>
                                    <option value="002">002 - Seguridad Residencial</option>
                                    <option value="003">003 - Seguridad Bancaria</option>
                                    <option value="004">004 - Administración</option>
                                    <option value="005">005 - Recursos Humanos</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>SECCION</label>
                                <select class="form-control" id="search-seccion">
                                    <option value="">Todas</option>
                                    <option value="GUA">GUA - Guardias</option>
                                    <option value="SUP">SUP - Supervisores</option>
                                    <option value="ADM">ADM - Administrativo</option>
                                    <option value="VEN">VEN - Ventas</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>CARGO</label>
                                <select class="form-control" id="search-cargo">
                                    <option value="">Todos</option>
                                    <option value="GUA">GUA - Guardia</option>
                                    <option value="SUP">SUP - Supervisor</option>
                                    <option value="JEF">JEF - Jefe</option>
                                    <option value="ADM">ADM - Administrativo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ESTADO</label>
                                <select class="form-control" id="search-estado">
                                    <option value="">Todos</option>
                                    <option value="ACT">ACT - Activo</option>
                                    <option value="VAC">VAC - Vacaciones</option>
                                    <option value="LIC">LIC - Licencia</option>
                                    <option value="RET">RET - Retirado</option>
                                    <option value="JUB">JUB - Jubilado</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>TIPO_TRA (Tipo Trabajador)</label>
                                <select class="form-control" id="search-tipo-tra">
                                    <option value="">Todos</option>
                                    <option value="1">1 - Operativo</option>
                                    <option value="2">2 - Administrativo</option>
                                    <option value="3">3 - Ejecutivo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>TIPO_PGO (Tipo Pago)</label>
                                <select class="form-control" id="search-tipo-pgo">
                                    <option value="">Todos</option>
                                    <option value="1">1 - Semanal</option>
                                    <option value="2">2 - Quincenal</option>
                                    <option value="3">3 - Mensual</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-primary" onclick="searchEmployees()">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-secondary" onclick="clearSearch()">
                                    <i class="fas fa-eraser"></i> Limpiar
                                </button>
                            </div>
                        </form>
                    </div>

                    <p style="color: #4a5568; font-size: 13px; margin-bottom: 15px;">
                        <i class="fas fa-info-circle"></i> Resultados basados en Stored Procedure: BROWSE_EMPLEADOS_DEPARTAMENTO
                    </p>

                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>APELLIDOS</th>
                                <th>CEDULA</th>
                                <th>CARGO</th>
                                <th>DEPTO</th>
                                <th>SECCION</th>
                                <th>SUELDO</th>
                                <th>FECHA_ING</th>
                                <th>TIPO_TRA</th>
                                <th>TIPO_PGO</th>
                                <th>ESTADO</th>
                                <th>ANTICIPO</th>
                                <th>DCT_EXTRA</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody id="employeeTableBody">
                            <tr onclick="showEmployeeDetails('001001')">
                                <td>001001</td>
                                <td>MARÍA ELENA</td>
                                <td>GONZÁLEZ</td>
                                <td>1234567890</td>
                                <td>GUA</td>
                                <td>001</td>
                                <td>GUA</td>
                                <td>460.00</td>
                                <td>15/03/2023</td>
                                <td>1</td>
                                <td>1</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>100.00</td>
                                <td>25.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('001001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('001001')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('001002')">
                                <td>001002</td>
                                <td>CARLOS ALBERTO</td>
                                <td>PÉREZ</td>
                                <td>0987654321</td>
                                <td>SUP</td>
                                <td>001</td>
                                <td>SUP</td>
                                <td>650.00</td>
                                <td>10/01/2022</td>
                                <td>2</td>
                                <td>2</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>0.00</td>
                                <td>15.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('001002')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('001002')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('002001')">
                                <td>002001</td>
                                <td>ANA LUCÍA</td>
                                <td>RODRÍGUEZ</td>
                                <td>1122334455</td>
                                <td>GUA</td>
                                <td>002</td>
                                <td>GUA</td>
                                <td>460.00</td>
                                <td>05/06/2023</td>
                                <td>1</td>
                                <td>1</td>
                                <td><span class="status-badge status-vacation">VAC</span></td>
                                <td>50.00</td>
                                <td>0.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('002001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('002001')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('004001')">
                                <td>004001</td>
                                <td>JUAN CARLOS</td>
                                <td>MORALES</td>
                                <td>5566778899</td>
                                <td>ADM</td>
                                <td>004</td>
                                <td>ADM</td>
                                <td>520.00</td>
                                <td>12/09/2021</td>
                                <td>2</td>
                                <td>2</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>200.00</td>
                                <td>30.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('004001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('004001')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('005001')">
                                <td>005001</td>
                                <td>PATRICIA ISABEL</td>
                                <td>TORRES</td>
                                <td>6677889900</td>
                                <td>JEF</td>
                                <td>005</td>
                                <td>ADM</td>
                                <td>720.00</td>
                                <td>20/11/2020</td>
                                <td>3</td>
                                <td>3</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>0.00</td>
                                <td>45.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('005001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('005001')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('001003')">
                                <td>001003</td>
                                <td>LUIS FERNANDO</td>
                                <td>VÁSQUEZ</td>
                                <td>9988776655</td>
                                <td>GUA</td>
                                <td>001</td>
                                <td>GUA</td>
                                <td>460.00</td>
                                <td>08/02/2024</td>
                                <td>1</td>
                                <td>1</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>75.00</td>
                                <td>20.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('001003')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('001003')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="showEmployeeDetails('003001')">
                                <td>003001</td>
                                <td>CARMEN ELENA</td>
                                <td>JIMÉNEZ</td>
                                <td>3344556677</td>
                                <td>GUA</td>
                                <td>003</td>
                                <td>GUA</td>
                                <td>480.00</td>
                                <td>25/07/2023</td>
                                <td>1</td>
                                <td>1</td>
                                <td><span class="status-badge status-active">ACT</span></td>
                                <td>0.00</td>
                                <td>10.00</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary" onclick="editEmployee('003001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary" onclick="printEmployee('003001')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Préstamos -->
                <div id="prestamos-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Préstamos y Anticipos</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="newLoan()">
                                <i class="fas fa-plus"></i> Nuevo Préstamo
                            </button>
                            <button class="btn btn-success" onclick="processLoanPayments()">
                                <i class="fas fa-money-bill"></i> Procesar Pagos
                            </button>
                            <button class="btn btn-warning" onclick="generateLoanReport()">
                                <i class="fas fa-file-alt"></i> Reporte
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Préstamos Activos</h4>
                            <div class="stat-value">67</div>
                            <div class="stat-change">$89,456 total</div>
                        </div>
                        <div class="stat-card">
                            <h4>Campo ANTICIPO</h4>
                            <div class="stat-value">$12,890</div>
                            <div class="stat-change">En RPEMPLEA</div>
                        </div>
                        <div class="stat-card">
                            <h4>Cuotas Pendientes</h4>
                            <div class="stat-value">234</div>
                            <div class="stat-change">$45,678 valor</div>
                        </div>
                        <div class="stat-card">
                            <h4>Empleados con Anticipos</h4>
                            <div class="stat-value">89</div>
                            <div class="stat-change">10.5% del total</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-hand-holding-usd"></i> Anticipos de Sueldo</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Campo ANTICIPO en RPEMPLEA</li>
                                    <li><i class="fas fa-check"></i> Descuento automático en nómina</li>
                                    <li><i class="fas fa-check"></i> Control por empleado</li>
                                    <li><i class="fas fa-check"></i> Límites configurables</li>
                                    <li><i class="fas fa-check"></i> Integración SP_RP_PREPARA_ROL</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Gestionar Anticipos
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-calculator"></i> Cálculo Automático</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Descuento en SP_RP_PREPARA_ROL</li>
                                    <li><i class="fas fa-check"></i> Actualización automática RPEMPLEA</li>
                                    <li><i class="fas fa-check"></i> Histórico en RPHISTOR</li>
                                    <li><i class="fas fa-check"></i> Control de saldos</li>
                                    <li><i class="fas fa-check"></i> Validación de límites</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Calcular Descuentos
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Anticipos por Empleado (Campo ANTICIPO - RPEMPLEA)</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>ANTICIPO</th>
                                <th>FECHA SOLICITUD</th>
                                <th>CUOTAS</th>
                                <th>DESCUENTO SEMANAL</th>
                                <th>ESTADO</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>$100.00</td>
                                <td>01/12/2024</td>
                                <td>5</td>
                                <td>$20.00</td>
                                <td><span class="status-badge status-active">ACTIVO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>$50.00</td>
                                <td>28/11/2024</td>
                                <td>2</td>
                                <td>$25.00</td>
                                <td><span class="status-badge status-active">ACTIVO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>004001</td>
                                <td>JUAN CARLOS MORALES</td>
                                <td>$200.00</td>
                                <td>15/11/2024</td>
                                <td>10</td>
                                <td>$20.00</td>
                                <td><span class="status-badge status-active">ACTIVO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Egresos -->
                <div id="egresos-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Egresos y Descuentos</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="newEgreso()">
                                <i class="fas fa-plus"></i> Nuevo Egreso
                            </button>
                            <button class="btn btn-success" onclick="processEgresos()">
                                <i class="fas fa-play"></i> Procesar Egresos
                            </button>
                            <button class="btn btn-warning" onclick="generateEgresoReport()">
                                <i class="fas fa-file-excel"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Egresos del Mes</h4>
                            <div class="stat-value">$67,890</div>
                            <div class="stat-change">847 empleados</div>
                        </div>
                        <div class="stat-card">
                            <h4>Descuentos IESS</h4>
                            <div class="stat-value">$23,456</div>
                            <div class="stat-change">9.45% total</div>
                        </div>
                        <div class="stat-card">
                            <h4>Campo DCT_EXTRA</h4>
                            <div class="stat-value">$8,456</div>
                            <div class="stat-change">Descuentos varios</div>
                        </div>
                        <div class="stat-card">
                            <h4>Campo ANTICIPO</h4>
                            <div class="stat-value">$12,890</div>
                            <div class="stat-change">89 empleados</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-shield-alt"></i> Descuentos IESS</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Aporte Personal: 9.45%</li>
                                    <li><i class="fas fa-check"></i> Base: Campo SUELDO RPEMPLEA</li>
                                    <li><i class="fas fa-check"></i> Cálculo en SP_RP_PREPARA_ROL</li>
                                    <li><i class="fas fa-check"></i> Reportes SUT automáticos</li>
                                    <li><i class="fas fa-check"></i> Validación límites legales</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Calcular IESS
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-money-bill"></i> Campo DCT_EXTRA</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Descuentos varios RPEMPLEA</li>
                                    <li><i class="fas fa-check"></i> Uniformes y equipos</li>
                                    <li><i class="fas fa-check"></i> Multas y sanciones</li>
                                    <li><i class="fas fa-check"></i> Préstamos terceros</li>
                                    <li><i class="fas fa-check"></i> Descuento automático nómina</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Gestionar DCT_EXTRA
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-calculator"></i> Campo ANTICIPO</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Anticipos de sueldo</li>
                                    <li><i class="fas fa-check"></i> Control automático</li>
                                    <li><i class="fas fa-check"></i> Límites por empleado</li>
                                    <li><i class="fas fa-check"></i> Integración SP_RP_PREPARA_ROL</li>
                                    <li><i class="fas fa-check"></i> Histórico RPHISTOR</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Controlar Anticipos
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-file-alt"></i> Stored Procedures</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-cog"></i> SP_RP_PREPARA_ROL</li>
                                    <li><i class="fas fa-cog"></i> SP_RP_DATOS_EMPLEADO</li>
                                    <li><i class="fas fa-cog"></i> BROWSE_EMPLEADOS_DEPARTAMENTO</li>
                                    <li><i class="fas fa-cog"></i> Cálculos automáticos</li>
                                    <li><i class="fas fa-cog"></i> Integración contable</li>
                                </ul>
                                <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">
                                    Ver Procedimientos
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Egresos por Empleado - Campos RPEMPLEA</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>SUELDO</th>
                                <th>IESS (9.45%)</th>
                                <th>ANTICIPO</th>
                                <th>DCT_EXTRA</th>
                                <th>TOTAL EGRESOS</th>
                                <th>NETO PAGAR</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>$460.00</td>
                                <td>$43.47</td>
                                <td>$100.00</td>
                                <td>$25.00</td>
                                <td>$168.47</td>
                                <td>$291.53</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>001002</td>
                                <td>CARLOS ALBERTO PÉREZ</td>
                                <td>$650.00</td>
                                <td>$61.43</td>
                                <td>$0.00</td>
                                <td>$15.00</td>
                                <td>$76.43</td>
                                <td>$573.57</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>$460.00</td>
                                <td>$43.47</td>
                                <td>$50.00</td>
                                <td>$0.00</td>
                                <td>$93.47</td>
                                <td>$366.53</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>004001</td>
                                <td>JUAN CARLOS MORALES</td>
                                <td>$520.00</td>
                                <td>$49.14</td>
                                <td>$200.00</td>
                                <td>$30.00</td>
                                <td>$279.14</td>
                                <td>$240.86</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Dotación -->
                <div id="dotacion-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Dotación y Equipos</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="newDotacion()">
                                <i class="fas fa-plus"></i> Nueva Dotación
                            </button>
                            <button class="btn btn-success" onclick="assignEquipment()">
                                <i class="fas fa-hand-holding"></i> Asignar Equipo
                            </button>
                            <button class="btn btn-warning" onclick="generateInventoryReport()">
                                <i class="fas fa-clipboard-list"></i> Inventario
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Equipos Asignados</h4>
                            <div class="stat-value">1,247</div>
                            <div class="stat-change">89.3% del stock</div>
                        </div>
                        <div class="stat-card">
                            <h4>Uniformes Entregados</h4>
                            <div class="stat-value">2,456</div>
                            <div class="stat-change">Este año</div>
                        </div>
                        <div class="stat-card">
                            <h4>Descuentos DCT_EXTRA</h4>
                            <div class="stat-value">$5,678</div>
                            <div class="stat-change">Por equipos perdidos</div>
                        </div>
                        <div class="stat-card">
                            <h4>Valor Inventario</h4>
                            <div class="stat-value">$89,456</div>
                            <div class="stat-change">Costo total</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-tshirt"></i> Uniformes de Seguridad</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Camisas de seguridad</li>
                                    <li><i class="fas fa-check"></i> Pantalones operativos</li>
                                    <li><i class="fas fa-check"></i> Chalecos reflectivos</li>
                                    <li><i class="fas fa-check"></i> Zapatos de seguridad</li>
                                    <li><i class="fas fa-check"></i> Control por tallas y empleado</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Gestionar Uniformes
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-radio"></i> Equipos de Comunicación</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Radios de comunicación</li>
                                    <li><i class="fas fa-check"></i> Celulares empresariales</li>
                                    <li><i class="fas fa-check"></i> Baterías y cargadores</li>
                                    <li><i class="fas fa-check"></i> Asignación por empleado</li>
                                    <li><i class="fas fa-check"></i> Control usando campos RUTA</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Asignar Equipos
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-shield-alt"></i> Equipos de Seguridad</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Detectores de metales</li>
                                    <li><i class="fas fa-check"></i> Chalecos antibalas</li>
                                    <li><i class="fas fa-check"></i> Linternas tácticas</li>
                                    <li><i class="fas fa-check"></i> Bastones de seguridad</li>
                                    <li><i class="fas fa-check"></i> Registro en campos RPEMPLEA</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    Inventario Seguridad
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-tools"></i> Control y Devoluciones</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Registro de entregas</li>
                                    <li><i class="fas fa-check"></i> Control de devoluciones</li>
                                    <li><i class="fas fa-check"></i> Descuentos campo DCT_EXTRA</li>
                                    <li><i class="fas fa-check"></i> Estado de equipos</li>
                                    <li><i class="fas fa-check"></i> Reportes de inventario</li>
                                </ul>
                                <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">
                                    Control Devoluciones
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Dotación por Empleado</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>RADIO</th>
                                <th>UNIFORME</th>
                                <th>EQUIPO SEGURIDAD</th>
                                <th>ÚLTIMA ENTREGA</th>
                                <th>DESCUENTO DCT_EXTRA</th>
                                <th>ESTADO</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>R001247</td>
                                <td>Completo</td>
                                <td>Linterna, Silbato</td>
                                <td>15/11/2024</td>
                                <td>$25.00</td>
                                <td><span class="status-badge status-active">COMPLETO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>001002</td>
                                <td>CARLOS ALBERTO PÉREZ</td>
                                <td>R001248</td>
                                <td>Completo</td>
                                <td>Detector, Chaleco</td>
                                <td>10/11/2024</td>
                                <td>$15.00</td>
                                <td><span class="status-badge status-active">COMPLETO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>R001249</td>
                                <td>Parcial</td>
                                <td>Linterna</td>
                                <td>20/10/2024</td>
                                <td>$0.00</td>
                                <td><span class="status-badge" style="background: #fff3cd; color: #856404;">PENDIENTE</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning">
                                        <i class="fas fa-exclamation"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Nómina Completo -->
                <div id="nomina-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Procesamiento de Nómina - SP_RP_PREPARA_ROL</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="executeStoredProcedure('SP_RP_PREPARA_ROL')">
                                <i class="fas fa-play"></i> Preparar Rol
                            </button>
                            <button class="btn btn-success" onclick="generatePayroll()">
                                <i class="fas fa-money-bill-wave"></i> Generar Nómina
                            </button>
                            <button class="btn btn-warning" onclick="showMassiveCorrections()">
                                <i class="fas fa-edit"></i> Correcciones Masivas
                            </button>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <h4 style="margin-bottom: 20px; color: #1e3c72;">Configuración de Procesamiento</h4>
                        <div class="employee-search">
                            <form class="search-form">
                                <div class="form-group">
                                    <label>Fecha Desde</label>
                                    <input type="date" class="form-control" id="payroll-from" value="2024-12-09">
                                </div>
                                <div class="form-group">
                                    <label>Fecha Hasta</label>
                                    <input type="date" class="form-control" id="payroll-to" value="2024-12-15">
                                </div>
                                <div class="form-group">
                                    <label>Forma de Liquidación</label>
                                    <select class="form-control" id="payroll-type">
                                        <option value="1">1 - Semanal</option>
                                        <option value="2">2 - Quincenal</option>
                                        <option value="3">3 - Mensual</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Tipo de Trabajador</label>
                                    <select class="form-control" id="worker-type">
                                        <option value="1">1 - Operativo</option>
                                        <option value="2">2 - Administrativo</option>
                                        <option value="3">3 - Ejecutivo</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Fin de Mes</label>
                                    <select class="form-control" id="end-month">
                                        <option value="S">Sí</option>
                                        <option value="N" selected>No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary" onclick="processPayroll()">
                                        <i class="fas fa-play"></i> Procesar
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Empleados a Procesar</h4>
                            <div class="stat-value">623</div>
                            <div class="stat-change">Tipo Trabajador 1</div>
                        </div>
                        <div class="stat-card">
                            <h4>Nómina Semanal</h4>
                            <div class="stat-value">$89,567</div>
                            <div class="stat-change">Total a pagar</div>
                        </div>
                        <div class="stat-card">
                            <h4>Horas Extras</h4>
                            <div class="stat-value">2,456</div>
                            <div class="stat-change">Total horas</div>
                        </div>
                        <div class="stat-card">
                            <h4>Descuentos IESS</h4>
                            <div class="stat-value">$8,464</div>
                            <div class="stat-change">9.45% total</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-calendar-week"></i> Nómina Semanal</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> 623 empleados de seguridad</li>
                                    <li><i class="fas fa-check"></i> Tipo de pago: 1 (Semanal)</li>
                                    <li><i class="fas fa-check"></i> Incluye horas extras 25%, 50%, 100%</li>
                                    <li><i class="fas fa-check"></i> Control de asistencia automático</li>
                                    <li><i class="fas fa-check"></i> Descuentos IESS, anticipos, DCT_EXTRA</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="processWeeklyPayroll()">
                                    Procesar Semanal
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-calendar-alt"></i> Nómina Quincenal</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> 124 personal administrativo</li>
                                    <li><i class="fas fa-check"></i> Tipo de pago: 2 (Quincenal)</li>
                                    <li><i class="fas fa-check"></i> Bonificaciones incluidas</li>
                                    <li><i class="fas fa-check"></i> Comisiones de ventas</li>
                                    <li><i class="fas fa-check"></i> Fondos de reserva automáticos</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="processBiweeklyPayroll()">
                                    Procesar Quincenal
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-calendar"></i> Nómina Mensual</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> 100 gerencia y supervisión</li>
                                    <li><i class="fas fa-check"></i> Tipo de pago: 3 (Mensual)</li>
                                    <li><i class="fas fa-check"></i> Beneficios especiales</li>
                                    <li><i class="fas fa-check"></i> Compensaciones variables</li>
                                    <li><i class="fas fa-check"></i> Vacaciones pagadas</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="processMonthlyPayroll()">
                                    Procesar Mensual
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-database"></i> Stored Procedures</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-cog"></i> SP_RP_PREPARA_ROL (1,400+ líneas)</li>
                                    <li><i class="fas fa-cog"></i> SP_RP_DATOS_EMPLEADO (31 FLAGS)</li>
                                    <li><i class="fas fa-cog"></i> Integración RPHISTOR</li>
                                    <li><i class="fas fa-cog"></i> Cálculos automáticos Ecuador</li>
                                    <li><i class="fas fa-cog"></i> Generación RPINGDES</li>
                                </ul>
                                <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;" onclick="showStoredProcedures()">
                                    Ver Procedimientos
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Resultado del Procesamiento - Tabla RPINGDES</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>DIAS TRABAJADOS</th>
                                <th>HORAS EXTRAS</th>
                                <th>TOTAL INGRESOS</th>
                                <th>DESCUENTOS</th>
                                <th>NETO A PAGAR</th>
                                <th>ESTADO</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>6</td>
                                <td>8.5</td>
                                <td>$142.50</td>
                                <td>$35.20</td>
                                <td>$107.30</td>
                                <td><span class="status-badge status-active">PROCESADO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewPayrollDetail('001001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>001002</td>
                                <td>CARLOS ALBERTO PÉREZ</td>
                                <td>6</td>
                                <td>12.0</td>
                                <td>$195.80</td>
                                <td>$48.90</td>
                                <td>$146.90</td>
                                <td><span class="status-badge status-active">PROCESADO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewPayrollDetail('001002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>6</td>
                                <td>4.0</td>
                                <td>$125.40</td>
                                <td>$28.75</td>
                                <td>$96.65</td>
                                <td><span class="status-badge status-active">PROCESADO</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewPayrollDetail('002001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Décimos Completo -->
                <div id="decimos-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Décimos - SP_RP_DECIMO_TERCER / SP_RP_DECIMO_CUARTO_QUINTO</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="calculateDecimos('13')">
                                <i class="fas fa-calculator"></i> Calcular Décimo 13°
                            </button>
                            <button class="btn btn-success" onclick="calculateDecimos('14')">
                                <i class="fas fa-calculator"></i> Calcular Décimo 14°
                            </button>
                            <button class="btn btn-warning" onclick="showDecimoHistory()">
                                <i class="fas fa-history"></i> Historial Décimos
                            </button>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <h4 style="margin-bottom: 20px; color: #1e3c72;">Configuración de Cálculo</h4>
                        <div class="employee-search">
                            <form class="search-form">
                                <div class="form-group">
                                    <label>Fecha Desde</label>
                                    <input type="date" class="form-control" id="decimo-from" value="2023-12-01">
                                </div>
                                <div class="form-group">
                                    <label>Fecha Hasta</label>
                                    <input type="date" class="form-control" id="decimo-to" value="2024-11-30">
                                </div>
                                <div class="form-group">
                                    <label>Tipo de Décimo</label>
                                    <select class="form-control" id="decimo-type">
                                        <option value="13">Décimo Tercer Sueldo</option>
                                        <option value="14">Décimo Cuarto Sueldo</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Flag Proceso</label>
                                    <select class="form-control" id="decimo-flag">
                                        <option value="1">1 - Cálculo Normal</option>
                                        <option value="2">2 - Liquidación</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary" onclick="calculateDecimoProcess()">
                                        <i class="fas fa-play"></i> Calcular
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Décimo Tercer Sueldo</h4>
                            <div class="stat-value">$426,847</div>
                            <div class="stat-change">Calculado hasta noviembre 2024</div>
                        </div>
                        <div class="stat-card">
                            <h4>Décimo Cuarto Sueldo</h4>
                            <div class="stat-value">$389,260</div>
                            <div class="stat-change">Basado en SBU $460</div>
                        </div>
                        <div class="stat-card">
                            <h4>Empleados Elegibles</h4>
                            <div class="stat-value">847</div>
                            <div class="stat-change">100% del personal activo</div>
                        </div>
                        <div class="stat-card">
                            <h4>Anticipos Pagados</h4>
                            <div class="stat-value">$127,458</div>
                            <div class="stat-change">Clase 167 descontados</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-gift"></i> SP_RP_DECIMO_TERCER</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-calendar"></i> Período: 01/12/2023 - 30/11/2024</li>
                                    <li><i class="fas fa-calculator"></i> Base: Suma ingresos anuales / 12</li>
                                    <li><i class="fas fa-minus-circle"></i> Descuenta anticipos (Clase 167)</li>
                                    <li><i class="fas fa-users"></i> Incluye días acumulados DECIMO5</li>
                                    <li><i class="fas fa-check-circle"></i> Cumplimiento legal Ecuador</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="executeDecimo13()">
                                    Ejecutar Décimo 13°
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-money-bill"></i> SP_RP_DECIMO_CUARTO_QUINTO</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-dollar-sign"></i> Base: SBU $460 (2024)</li>
                                    <li><i class="fas fa-calendar-check"></i> Cálculo proporcional (BAS_14/360)</li>
                                    <li><i class="fas fa-user-clock"></i> Considera tiempo trabajado</li>
                                    <li><i class="fas fa-file-alt"></i> Campo DECIMO4 acumulado</li>
                                    <li><i class="fas fa-shield-alt"></i> Validación días trabajados</li>
                                </ul>
                                <button class="btn btn-success" style="width: 100%; margin-top: 15px;" onclick="executeDecimo14()">
                                    Ejecutar Décimo 14°
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-chart-line"></i> Análisis de Anticipos</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-search"></i> Consulta RPHISTOR Clase 167</li>
                                    <li><i class="fas fa-calendar"></i> Período de anticipos</li>
                                    <li><i class="fas fa-minus"></i> Descuento automático</li>
                                    <li><i class="fas fa-table"></i> Tabla temporal #anticipos_empleados</li>
                                    <li><i class="fas fa-balance-scale"></i> Balance final décimo</li>
                                </ul>
                                <button class="btn btn-warning" style="width: 100%; margin-top: 15px;" onclick="analyzeAnticipos()">
                                    Analizar Anticipos
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-file-export"></i> Reportes Décimos</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-print"></i> Reporte individual por empleado</li>
                                    <li><i class="fas fa-list"></i> Consolidado general</li>
                                    <li><i class="fas fa-download"></i> Exportación Excel/PDF</li>
                                    <li><i class="fas fa-envelope"></i> Envío automático empleados</li>
                                    <li><i class="fas fa-archive"></i> Archivo histórico</li>
                                </ul>
                                <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;" onclick="generateDecimoReports()">
                                    Generar Reportes
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Resultado Cálculo Décimos</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>FECHA_ING</th>
                                <th>DIAS_T</th>
                                <th>VALOR_T</th>
                                <th>ANTICIPOS</th>
                                <th>DECIMO CALCULADO</th>
                                <th>NETO A PAGAR</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>15/03/2023</td>
                                <td>365</td>
                                <td>$5,980.00</td>
                                <td>$150.00</td>
                                <td>$498.33</td>
                                <td>$348.33</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDecimoDetail('001001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>001002</td>
                                <td>CARLOS ALBERTO PÉREZ</td>
                                <td>10/01/2022</td>
                                <td>365</td>
                                <td>$8,450.00</td>
                                <td>$0.00</td>
                                <td>$704.17</td>
                                <td>$704.17</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDecimoDetail('001002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>05/06/2023</td>
                                <td>210</td>
                                <td>$3,220.00</td>
                                <td>$100.00</td>
                                <td>$268.33</td>
                                <td>$168.33</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDecimoDetail('002001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Vacaciones Completo -->
                <div id="vacaciones-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Gestión de Vacaciones - SP_RP_PREPARA_VACA</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="calculateVacations()">
                                <i class="fas fa-calculator"></i> Calcular Vacaciones
                            </button>
                            <button class="btn btn-success" onclick="processVacationPayment()">
                                <i class="fas fa-money-bill"></i> Pagar Vacaciones
                            </button>
                            <button class="btn btn-warning" onclick="requestVacation()">
                                <i class="fas fa-paper-plane"></i> Solicitar Vacaciones
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Empleados con Derecho</h4>
                            <div class="stat-value">623</div>
                            <div class="stat-change">Más de 1 año</div>
                        </div>
                        <div class="stat-card">
                            <h4>Días Acumulados</h4>
                            <div class="stat-value">9,845</div>
                            <div class="stat-change">Total pendientes</div>
                        </div>
                        <div class="stat-card">
                            <h4>En Vacaciones</h4>
                            <div class="stat-value">34</div>
                            <div class="stat-change">Actualmente</div>
                        </div>
                        <div class="stat-card">
                            <h4>Valor a Pagar</h4>
                            <div class="stat-value">$45,789</div>
                            <div class="stat-change">Vacaciones pendientes</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <h4 style="margin-bottom: 20px; color: #1e3c72;">Configuración de Vacaciones</h4>
                        <div class="employee-search">
                            <form class="search-form">
                                <div class="form-group">
                                    <label>Empleado</label>
                                    <input type="text" class="form-control" placeholder="001001">
                                </div>
                                <div class="form-group">
                                    <label>Fecha Inicio Vacaciones</label>
                                    <input type="date" class="form-control" value="2024-12-16">
                                </div>
                                <div class="form-group">
                                    <label>Días a Tomar</label>
                                    <input type="number" class="form-control" placeholder="15" min="1" max="30">
                                </div>
                                <div class="form-group">
                                    <label>Tipo</label>
                                    <select class="form-control">
                                        <option value="NORMAL">Vacaciones Normales</option>
                                        <option value="LIQUIDACION">Liquidación Vacaciones</option>
                                        <option value="ANTICIPO">Anticipo Vacaciones</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary">
                                        <i class="fas fa-play"></i> Procesar
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Estado de Vacaciones por Empleado</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>FECHA_ING</th>
                                <th>DÍAS ACUMULADOS</th>
                                <th>DÍAS TOMADOS</th>
                                <th>DÍAS PENDIENTES</th>
                                <th>ÚLTIMO PERÍODO</th>
                                <th>ESTADO</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001001</td>
                                <td>MARÍA ELENA GONZÁLEZ</td>
                                <td>15/03/2023</td>
                                <td>15</td>
                                <td>0</td>
                                <td>15</td>
                                <td>2024</td>
                                <td><span class="status-badge status-active">DISPONIBLE</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="processVacation('001001')">
                                        <i class="fas fa-play"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>001002</td>
                                <td>CARLOS ALBERTO PÉREZ</td>
                                <td>10/01/2022</td>
                                <td>30</td>
                                <td>15</td>
                                <td>15</td>
                                <td>2024</td>
                                <td><span class="status-badge status-active">DISPONIBLE</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="processVacation('001002')">
                                        <i class="fas fa-play"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002001</td>
                                <td>ANA LUCÍA RODRÍGUEZ</td>
                                <td>05/06/2023</td>
                                <td>10</td>
                                <td>10</td>
                                <td>0</td>
                                <td>2024</td>
                                <td><span class="status-badge status-vacation">EN VACACIONES</span></td>
                                <td>
                                    <button class="btn btn-sm btn-secondary" onclick="viewVacationDetail('002001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Liquidaciones Completo -->
                <div id="liquidaciones-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Liquidaciones y Finiquitos</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="newLiquidation()">
                                <i class="fas fa-plus"></i> Nueva Liquidación
                            </button>
                            <button class="btn btn-success" onclick="processLiquidations()">
                                <i class="fas fa-play"></i> Procesar Liquidaciones
                            </button>
                            <button class="btn btn-warning" onclick="generateLiquidationReport()">
                                <i class="fas fa-file-pdf"></i> Reporte
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Liquidaciones Mes</h4>
                            <div class="stat-value">12</div>
                            <div class="stat-change">Diciembre 2024</div>
                        </div>
                        <div class="stat-card">
                            <h4>Total Pagado</h4>
                            <div class="stat-value">$67,890</div>
                            <div class="stat-change">En liquidaciones</div>
                        </div>
                        <div class="stat-card">
                            <h4>Décimos Liquidados</h4>
                            <div class="stat-value">$23,456</div>
                            <div class="stat-change">13° y 14° sueldo</div>
                        </div>
                        <div class="stat-card">
                            <h4>Vacaciones</h4>
                            <div class="stat-value">$18,234</div>
                            <div class="stat-change">No gozadas</div>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <h4 style="margin-bottom: 20px; color: #1e3c72;">Nueva Liquidación</h4>
                        <div class="employee-search">
                            <form class="search-form">
                                <div class="form-group">
                                    <label>Empleado</label>
                                    <input type="text" class="form-control" placeholder="001001">
                                </div>
                                <div class="form-group">
                                    <label>Fecha Salida</label>
                                    <input type="date" class="form-control" value="2024-12-15">
                                </div>
                                <div class="form-group">
                                    <label>Motivo</label>
                                    <select class="form-control">
                                        <option value="RENUNCIA">Renuncia Voluntaria</option>
                                        <option value="DESPIDO">Despido Intempestivo</option>
                                        <option value="VISTO_BUENO">Visto Bueno</option>
                                        <option value="JUBILACION">Jubilación</option>
                                        <option value="MUERTE">Fallecimiento</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Días Trabajados Mes</label>
                                    <input type="number" class="form-control" placeholder="15" min="1" max="31">
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary" onclick="calculateLiquidation()">
                                        <i class="fas fa-calculator"></i> Calcular
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Liquidaciones Procesadas</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>EMPLEADO</th>
                                <th>NOMBRES</th>
                                <th>FECHA SALIDA</th>
                                <th>MOTIVO</th>
                                <th>SUELDO PROPORCIONAL</th>
                                <th>DÉCIMOS</th>
                                <th>VACACIONES</th>
                                <th>DESAHUCIO</th>
                                <th>TOTAL</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>001005</td>
                                <td>PEDRO RAMÍREZ LÓPEZ</td>
                                <td>30/11/2024</td>
                                <td>RENUNCIA</td>
                                <td>$460.00</td>
                                <td>$850.50</td>
                                <td>$575.00</td>
                                <td>$0.00</td>
                                <td>$1,885.50</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewLiquidationDetail('001005')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>002003</td>
                                <td>LUCÍA FERNÁNDEZ MORA</td>
                                <td>15/11/2024</td>
                                <td>DESPIDO</td>
                                <td>$230.00</td>
                                <td>$420.75</td>
                                <td>$287.50</td>
                                <td>$1,380.00</td>
                                <td>$2,318.25</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewLiquidationDetail('002003')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Módulo de Reportes Completo -->
                <div id="reportes-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Reportes y Análisis</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="generateCustomReport()">
                                <i class="fas fa-chart-bar"></i> Reporte Personalizado
                            </button>
                            <button class="btn btn-success" onclick="exportAllData()">
                                <i class="fas fa-file-excel"></i> Exportar Todo
                            </button>
                            <button class="btn btn-warning" onclick="scheduleReport()">
                                <i class="fas fa-clock"></i> Programar Reporte
                            </button>
                        </div>
                    </div>

                    <div class="payroll-section">
                        <div class="payroll-grid">
                            <div class="payroll-card">
                                <h4><i class="fas fa-users"></i> Reportes de Personal</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Listado general empleados</li>
                                    <li><i class="fas fa-check"></i> Por departamento y sección</li>
                                    <li><i class="fas fa-check"></i> Fichas individuales</li>
                                    <li><i class="fas fa-check"></i> Cumpleaños del mes</li>
                                    <li><i class="fas fa-check"></i> Antigüedad laboral</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="generatePersonnelReport()">
                                    Generar Reporte Personal
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-money-bill"></i> Reportes de Nómina</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Resumen de nómina</li>
                                    <li><i class="fas fa-check"></i> Detalle por empleado</li>
                                    <li><i class="fas fa-check"></i> Horas extras</li>
                                    <li><i class="fas fa-check"></i> Descuentos aplicados</li>
                                    <li><i class="fas fa-check"></i> Transferencias bancarias</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="generatePayrollReport()">
                                    Generar Reporte Nómina
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-shield-alt"></i> Reportes Legales</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Reporte IESS (SUT)</li>
                                    <li><i class="fas fa-check"></i> Décimo tercer sueldo</li>
                                    <li><i class="fas fa-check"></i> Décimo cuarto sueldo</li>
                                    <li><i class="fas fa-check"></i> Fondos de reserva</li>
                                    <li><i class="fas fa-check"></i> Utilidades</li>
                                </ul>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="generateLegalReport()">
                                    Generar Reporte Legal
                                </button>
                            </div>

                            <div class="payroll-card">
                                <h4><i class="fas fa-chart-line"></i> Análisis Estadístico</h4>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Rotación de personal</li>
                                    <li><i class="fas fa-check"></i> Costos laborales</li>
                                    <li><i class="fas fa-check"></i> Productividad por área</li>
                                    <li><i class="fas fa-check"></i> Indicadores KPI</li>
                                    <li><i class="fas fa-check"></i> Tendencias salariales</li>
                                </ul>
                                <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;" onclick="generateAnalysisReport()">
                                    Generar Análisis
                                </button>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 20px; color: #1e3c72;">Reportes Disponibles</h4>
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th>TIPO REPORTE</th>
                                <th>DESCRIPCIÓN</th>
                                <th>FRECUENCIA</th>
                                <th>ÚLTIMO GENERADO</th>
                                <th>FORMATO</th>
                                <th>ACCIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Nómina Semanal</td>
                                <td>Resumen pagos semana 09-15 Dic</td>
                                <td>Semanal</td>
                                <td>15/12/2024</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="downloadReport('nomina_semanal')">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>IESS Mensual</td>
                                <td>Reporte aportes IESS Diciembre</td>
                                <td>Mensual</td>
                                <td>01/12/2024</td>
                                <td>PDF, TXT</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="downloadReport('iess_mensual')">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Décimos 2024</td>
                                <td>Cálculo décimo tercero y cuarto</td>
                                <td>Anual</td>
                                <td>30/11/2024</td>
                                <td>PDF, Excel</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="downloadReport('decimos_2024')">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="rpemplea-section" style="display: none;">
                    <div class="content-header">
                        <h2 class="content-title">Tabla RPEMPLEA - Datos Maestros</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="queryRPEMPLEA()">
                                <i class="fas fa-search"></i> Consultar Tabla
                            </button>
                            <button class="btn btn-secondary" onclick="showTableStructure('RPEMPLEA')">
                                <i class="fas fa-table"></i> Estructura
                            </button>
                        </div>
                    </div>
                    <p>Visualización completa de la estructura de la tabla RPEMPLEA...</p>
                </div>
            </main>
        </div>
    </div>

    <script>
        function showSection(sectionName) {
            const sections = ['empleados', 'nomina', 'decimos', 'vacaciones', 'liquidaciones', 'prestamos', 'egresos', 'dotacion', 'reportes', 'configuracion', 'departamentos', 'turnos', 'equipos', 'clientes', 'rpemplea', 'rphistor', 'rpcontrl'];

            console.log(`Cambiando a sección: ${sectionName}`);

            sections.forEach(section => {
                const element = document.getElementById(section + '-section');
                if (element) {
                    element.style.display = 'none';
                }
            });

            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
            }

            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.classList.remove('active');
            });
            if (event && event.target) {
                event.target.classList.add('active');
            }

            // Log de la sección activa
            const sectionTitles = {
                'empleados': 'Gestión de Empleados - Tabla RPEMPLEA',
                'nomina': 'Procesamiento de Nómina - SP_RP_PREPARA_ROL',
                'decimos': 'Gestión de Décimos - SP_RP_DECIMO_TERCER/CUARTO',
                'vacaciones': 'Gestión de Vacaciones - SP_RP_PREPARA_VACA',
                'liquidaciones': 'Liquidaciones y Finiquitos',
                'prestamos': 'Gestión de Préstamos - Campo ANTICIPO',
                'egresos': 'Gestión de Egresos - Campos DCT_EXTRA/ANTICIPO',
                'dotacion': 'Gestión de Dotación y Equipos',
                'reportes': 'Reportes y Análisis',
                'rpemplea': 'Tabla RPEMPLEA - Datos Maestros'
            };

            if (sectionTitles[sectionName]) {
                console.log(`Sección activa: ${sectionTitles[sectionName]}`);
            }
        }

        function clearSearch() {
            document.getElementById('search-empleado').value = '';
            document.getElementById('search-cedula').value = '';
            document.getElementById('search-nombres').value = '';
            document.getElementById('search-apellidos').value = '';
            document.getElementById('search-depto').value = '';
            document.getElementById('search-seccion').value = '';
            document.getElementById('search-cargo').value = '';
            document.getElementById('search-estado').value = '';
            document.getElementById('search-tipo-tra').value = '';
            document.getElementById('search-tipo-pgo').value = '';
            console.log('Campos de búsqueda limpiados');
        }

        function searchEmployees() {
            const searchParams = {
                empleado: document.getElementById('search-empleado').value,
                cedula: document.getElementById('search-cedula').value,
                nombres: document.getElementById('search-nombres').value,
                apellidos: document.getElementById('search-apellidos').value,
                depto: document.getElementById('search-depto').value,
                seccion: document.getElementById('search-seccion').value,
                cargo: document.getElementById('search-cargo').value,
                estado: document.getElementById('search-estado').value,
                tipo_tra: document.getElementById('search-tipo-tra').value,
                tipo_pgo: document.getElementById('search-tipo-pgo').value
            };

            console.log('Ejecutando búsqueda con parámetros:', searchParams);
            alert('Búsqueda ejecutada con BROWSE_EMPLEADOS_DEPARTAMENTO. Parámetros enviados: ' + JSON.stringify(searchParams));
        }

        function showEmployeeDetails(empleadoId) {
            console.log('Ejecutando SP_RP_DATOS_EMPLEADO con diferentes FLAGS para empleado:', empleadoId);
            alert(`Mostrando detalles del empleado ${empleadoId} usando SP_RP_DATOS_EMPLEADO con FLAGS 1-31 para obtener todos los datos.`);
        }

        function editEmployee(empleadoId) {
            alert(`Editando empleado ${empleadoId}. En el sistema real, esto abriría el formulario de edición con datos de RPEMPLEA.`);
        }

        function printEmployee(empleadoId) {
            alert(`Imprimiendo ficha del empleado ${empleadoId} usando SP_RP_IMPRIME_FICHA_EMPLEADO_TAB.`);
        }

        function newEmployee() {
            alert('Creando nuevo empleado. Formulario con todos los campos de RPEMPLEA.');
        }

        function newLoan() {
            alert('Nuevo préstamo. Esto actualizará el campo ANTICIPO en RPEMPLEA.');
        }

        function processLoanPayments() {
            alert('Procesando pagos de préstamos. Actualiza campo ANTICIPO de RPEMPLEA en SP_RP_PREPARA_ROL.');
        }

        function generateLoanReport() {
            alert('Generando reporte de préstamos basado en campo ANTICIPO de RPEMPLEA.');
        }

        function newEgreso() {
            alert('Nuevo egreso. Actualizará campos DCT_EXTRA o ANTICIPO según el tipo.');
        }

        function processEgresos() {
            alert('Procesando egresos. Utiliza campos SUELDO, ANTICIPO, DCT_EXTRA de RPEMPLEA y cálculos IESS.');
        }

        function generateEgresoReport() {
            alert('Generando reporte de egresos basado en campos de RPEMPLEA y RPHISTOR.');
        }

        function newDotacion() {
            alert('Nueva dotación. Control de equipos con posibles descuentos en DCT_EXTRA.');
        }

        function assignEquipment() {
            alert('Asignando equipos. Registro usando campos disponibles de RPEMPLEA.');
        }

        function generateInventoryReport() {
            alert('Generando reporte de inventario de dotación y equipos asignados por empleado.');
        }

        // Funciones del Módulo de Nómina
        function processPayroll() {
            const from = document.getElementById('payroll-from').value;
            const to = document.getElementById('payroll-to').value;
            const type = document.getElementById('payroll-type').value;
            const workerType = document.getElementById('worker-type').value;

            alert(`Ejecutando SP_RP_PREPARA_ROL:\n- Fecha: ${from} a ${to}\n- Forma Liquidación: ${type}\n- Tipo Trabajador: ${workerType}\n\nProcesando nómina con parámetros de RPEMPLEA...`);
        }

        function processWeeklyPayroll() {
            alert('Procesando nómina semanal para 623 empleados operativos.\n\nEjecutando:\n- SP_RP_PREPARA_ROL con TIPO_PGO=1\n- Cálculo horas extras\n- Descuentos IESS automáticos\n- Generación tabla RPINGDES');
        }

        function processBiweeklyPayroll() {
            alert('Procesando nómina quincenal para 124 empleados administrativos.\n\nIncluye:\n- Bonificaciones\n- Comisiones\n- Fondos de reserva\n- Integración contable');
        }

        function processMonthlyPayroll() {
            alert('Procesando nómina mensual para 100 empleados ejecutivos.\n\nIncluye:\n- Compensaciones variables\n- Beneficios especiales\n- Vacaciones proporcionales');
        }

        function showStoredProcedures() {
            alert('Stored Procedures del Sistema SAI:\n\n• SP_RP_PREPARA_ROL (1,400+ líneas)\n• SP_RP_DATOS_EMPLEADO (31 FLAGS)\n• BROWSE_EMPLEADOS_DEPARTAMENTO\n• SP_RP_DECIMO_TERCER\n• SP_RP_DECIMO_CUARTO_QUINTO\n• SP_RP_PREPARA_VACA\n\nTodos integrados con PowerBuilder 11.5');
        }

        function viewPayrollDetail(empleadoId) {
            alert(`Detalle de nómina para empleado ${empleadoId}:\n\n• Consulta SP_RP_DATOS_EMPLEADO con FLAGS\n• Detalle de RPINGDES\n• Histórico en RPHISTOR\n• Desglose de ingresos y descuentos`);
        }

        // Funciones del Módulo de Décimos
        function calculateDecimoProcess() {
            const from = document.getElementById('decimo-from').value;
            const to = document.getElementById('decimo-to').value;
            const type = document.getElementById('decimo-type').value;
            const flag = document.getElementById('decimo-flag').value;

            const procedureName = type === '13' ? 'SP_RP_DECIMO_TERCER' : 'SP_RP_DECIMO_CUARTO_QUINTO';

            alert(`Ejecutando ${procedureName}:\n\n- Período: ${from} a ${to}\n- Flag: ${flag}\n- Tipo Décimo: ${type}\n\nCalculando con base en RPHISTOR y RPEMPLEA...`);
        }

        function executeDecimo13() {
            alert('Ejecutando SP_RP_DECIMO_TERCER:\n\n• Cálculo base: Suma ingresos anuales / 12\n• Descuento anticipos Clase 167\n• Inclusión días DECIMO5\n• Validación fecha ingreso\n• Generación reporte individual');
        }

        function executeDecimo14() {
            alert('Ejecutando SP_RP_DECIMO_CUARTO_QUINTO:\n\n• Base SBU $460 (2024)\n• Cálculo: (BAS_14/360) * días trabajados\n• Campo DECIMO4 acumulado\n• Validación empleados elegibles\n• Reporte automático');
        }

        function analyzeAnticipos() {
            alert('Analizando anticipos de décimos:\n\n• Consulta RPHISTOR Clase 167\n• Creación tabla #anticipos_empleados\n• Suma valores por empleado\n• Descuento automático en cálculo\n• Balance final décimo neto');
        }

        function generateDecimoReports() {
            alert('Generando reportes de décimos:\n\n• Reporte individual por empleado\n• Consolidado general empresa\n• Exportación Excel y PDF\n• Envío automático por email\n• Archivo histórico anual');
        }

        function viewDecimoDetail(empleadoId) {
            alert(`Detalle décimo empleado ${empleadoId}:\n\n• Histórico ingresos RPHISTOR\n• Anticipos pagados\n• Cálculos proporcionales\n• Días trabajados efectivos\n• Valor neto a pagar`);
        }

        // Funciones del Módulo de Vacaciones
        function calculateVacations() {
            alert('Calculando vacaciones:\n\n• Validación FECHA_ING > 1 año\n• Cálculo días proporcionales\n• Campo VACACION en RPEMPLEA\n• Actualización FEC_INVAC\n• Registro histórico RPHISTOR');
        }

        function processVacationPayment() {
            alert('Procesando pago de vacaciones:\n\n• Cálculo valor promedio 12 meses\n• Inclusión horas extras proporcionales\n• Generación comprobante de pago\n• Actualización saldos RPEMPLEA');
        }

        function requestVacation() {
            alert('Solicitud de vacaciones:\n\n• Validación días disponibles\n• Verificación calendario laboral\n• Aprobación automática/manual\n• Notificación supervisor\n• Actualización estado empleado');
        }

        function processVacation(empleadoId) {
            alert(`Procesando vacaciones empleado ${empleadoId}:\n\n• Validación días acumulados\n• Cálculo valor proporcional\n• Actualización ESTADO = VAC\n• Registro en RPHISTOR\n• Generación comprobante`);
        }

        function viewVacationDetail(empleadoId) {
            alert(`Detalle vacaciones empleado ${empleadoId}:\n\n• Histórico de períodos\n• Días tomados por año\n• Saldos pendientes\n• Próximos vencimientos\n• Valores pagados`);
        }

        // Funciones del Módulo de Liquidaciones
        function newLiquidation() {
            alert('Nueva liquidación de empleado:\n\n• Formulario datos salida\n• Cálculo automático beneficios\n• Validación legal Ecuador\n• Generación acta finiquito\n• Actualización ESTADO = RET');
        }

        function processLiquidations() {
            alert('Procesando liquidaciones masivas:\n\n• Validación datos empleados\n• Cálculo décimos proporcionales\n• Vacaciones no gozadas\n• Desahucio según causa\n• Generación comprobantes');
        }

        function generateLiquidationReport() {
            alert('Generando reporte de liquidaciones:\n\n• Resumen mensual liquidaciones\n• Detalle por tipo de salida\n• Costos por departamento\n• Estadísticas rotación\n• Exportación contable');
        }

        function calculateLiquidation() {
            alert('Calculando liquidación:\n\n• Sueldo proporcional días trabajados\n• Décimo tercero y cuarto\n• Vacaciones no gozadas\n• Desahucio según Art. 188 Código Trabajo\n• Bonificación desahucio si aplica');
        }

        function viewLiquidationDetail(empleadoId) {
            alert(`Detalle liquidación empleado ${empleadoId}:\n\n• Desglose de conceptos\n• Base legal aplicada\n• Cálculos detallados\n• Documentos generados\n• Estado de pagos`);
        }

        // Funciones del Módulo de Reportes
        function generateCustomReport() {
            alert('Generador de reportes personalizado:\n\n• Selección campos RPEMPLEA\n• Filtros avanzados\n• Agrupaciones y totales\n• Formatos múltiples\n• Programación automática');
        }

        function exportAllData() {
            alert('Exportando datos completos:\n\n• Tablas RPEMPLEA, RPHISTOR, RPCONTRL\n• Formato Excel con pestañas\n• Respaldo completo base datos\n• Compresión automática\n• Envío por email');
        }

        function scheduleReport() {
            alert('Programar reporte automático:\n\n• Frecuencia: Diaria/Semanal/Mensual\n• Destinatarios email\n• Formato y contenido\n• Condiciones de envío\n• Notificaciones automáticas');
        }

        function generatePersonnelReport() {
            alert('Generando reporte de personal:\n\n• Listado completo RPEMPLEA\n• Agrupación por DEPTO y SECCION\n• Estadísticas demográficas\n• Antigüedad laboral\n• Distribución salarial');
        }

        function generatePayrollReport() {
            alert('Generando reporte de nómina:\n\n• Resumen RPINGDES procesados\n• Detalle ingresos y descuentos\n• Horas extras por empleado\n• Transferencias bancarias\n• Conciliación contable');
        }

        function generateLegalReport() {
            alert('Generando reportes legales:\n\n• Formulario SUT IESS\n• Reporte décimos anuales\n• Fondos de reserva\n• Utilidades trabajadores\n• Cumplimiento normativo Ecuador');
        }

        function generateAnalysisReport() {
            alert('Generando análisis estadístico:\n\n• KPIs recursos humanos\n• Rotación por departamento\n• Costos laborales unitarios\n• Tendencias salariales\n• Proyecciones presupuestarias');
        }

        function downloadReport(reportType) {
            const reports = {
                'nomina_semanal': 'Descargando reporte nómina semanal.pdf',
                'iess_mensual': 'Descargando reporte IESS diciembre.pdf',
                'decimos_2024': 'Descargando reporte décimos 2024.xlsx'
            };

            alert(reports[reportType] + '\n\nArchivo generado desde stored procedures del sistema SAI.');
        }

        function executeStoredProcedure(spName) {
            alert(`Ejecutando ${spName} con parámetros de la tabla RPEMPLEA para procesar nómina.`);
        }

        function processMassiveOperation(operation) {
            const operations = {
                'import': 'Carga Masiva de Empleados a RPEMPLEA',
                'corrections': 'Correcciones Masivas usando BROWSE_EMPLEADOS_DEPARTAMENTO'
            };
            alert(`Iniciando ${operations[operation]}. Utiliza stored procedures del sistema SAI.`);
        }

        // Inicialización del sistema
        function initializeSystem() {
            console.log('=== Sistema SAI - PowerBuilder 11.5 + SQL Server ===');
            console.log('Base de Datos: INSEVIG CIA. LTDA');
            console.log('Tablas Principales: RPEMPLEA, RPHISTOR, RPCONTRL, RPINGDES, DBTABLAS');
            console.log('Stored Procedures Disponibles:');
            console.log('- SP_RP_PREPARA_ROL (Procesamiento nómina)');
            console.log('- SP_RP_DATOS_EMPLEADO (31 FLAGS disponibles)');
            console.log('- BROWSE_EMPLEADOS_DEPARTAMENTO (Búsqueda empleados)');
            console.log('- SP_RP_DECIMO_TERCER (Cálculo décimo 13°)');
            console.log('- SP_RP_DECIMO_CUARTO_QUINTO (Cálculo décimo 14°)');
            console.log('- SP_RP_PREPARA_VACA (Procesamiento vacaciones)');
            console.log('Campos RPEMPLEA: EMPLEADO, NOMBRES, APELLIDOS, CEDULA, CARGO, DEPTO, SECCION, SUELDO, FECHA_ING, TIPO_TRA, TIPO_PGO, ESTADO, ANTICIPO, DCT_EXTRA, ING_EXTRA');
            console.log('Sistema completamente funcional y listo para usar.');
        }

        // Ejecutar inicialización al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
        });

        console.log('Sistema SAI cargado correctamente - Todos los módulos activos');
    </script>
</body>
</html>